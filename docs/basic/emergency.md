# 应急处理流程和规范
## 线上故障定义
为了让产品研发人员可以更快速恢复问题、解决问题，也为探索更好的保证产品质量的方法，针对线上故障，需要规范的处理流程。<br/><br/>
故障是产品存在的错误、毛病等各种问题，也是系统所需要实现的某种功能的失效或违背。何为线上故障？产品开发完成、测试通过并发布后，用户在使用过程中反馈的所有问题都属于线上故障。<br/>

## 线上故障分类
软件故障有多重分类方法，如按出现的开发阶段划分，按失效产生的后果来划分等。如何对线上故障分类呢？
#### 步骤1	选择故障分类依据
故障有两个重要因素：严重性、优先级。线上故障的优先级在当前所有故障里面是最高的，所以我们对线上故障分类时直接根据其严重性（失效后产生的后果）来分类。
#### 步骤2	定义故障级别
确定故障分类依据后，需要基于选择的分类依据制定故障级别。根据故障的影响程度，将线上故障的级别定义如下：
（1）致命故障 Critical：系统崩溃，停止运行，阻碍用户工作继续进行。
（2）严重故障Major：主流程不通，影响系统基本功能。
（3）一般故障 Minor：功能没有完全实现但不影响使用，功能菜单存在缺陷但不会影响系统稳定性。
（4）提示类故障Suggestion：建议优化类问题。
#### 步骤3	制定故障等级列表
基于分类依据和故障级别定义制定对应的故障等级列表，后续有线上故障发生时，相关人员可直接参考该列表评估故障等级。下表是基于严重性定义以及区块链实际应用场景制定的一份故障等级列表，将线上故障分为如下4类：


|故障级别             |描述       |错误内容举例           |
|:---------------:|:-------------|:-----------|
|L1|群组或客户端不能正常工作；引起用户对产品严重不满意，造成投诉或放弃使用。                |1）	节点启动失败、因程序导致的节点连接异常、共识异常导等导致整个群组不能正常工作；
2）	Console、SDK等客户端无法正常使用；
3）	由程序引起的系统崩溃、死机、程序非法退出；
4）	死循环、数据库发生死锁、与数据库连接错误；
5）	因程序问题造成资金损失等；
6）	安全类问题。
   |
|L2|严重影响系统基本功能使用              |控制权限功能设置       |
|L3|影响系统基本功能使用，但有规避途径。影响次要功能实现或部分场景存在问题。  |控制节点类型设置       |
|L4|较小错误，使操作者不方便，但不影响功能实现。|控制使用CNS            |


## 故障处理流程
